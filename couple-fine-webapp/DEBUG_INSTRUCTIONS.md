# ğŸ” Supabase ì‹¤ì‹œê°„ ë™ê¸°í™” ë¬¸ì œ ë””ë²„ê¹… ê°€ì´ë“œ

## ë¬¸ì œ ìƒí™©
1. **ì‹¤ì‹œê°„ ì–‘ë°©í–¥ ë°ì´í„° êµí™˜ ì•ˆë¨** - ì»¤í”Œ ê°„ ë°ì´í„°ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ë™ê¸°í™”ë˜ì§€ ì•ŠìŒ
2. **CRUD ê¸°ëŠ¥ ì‹¤íŒ¨** - ê·œì¹™, ë²Œê¸ˆ, ë³´ìƒ ìƒì„±/ìˆ˜ì •/ì‚­ì œê°€ ì‘ë™í•˜ì§€ ì•ŠìŒ

## ë””ë²„ê¹… ë„êµ¬ ì‚¬ìš©ë²•

### 1. ë¸Œë¼ìš°ì € ì½˜ì†” ì—´ê¸°
- Chrome/Edge: `F12` ë˜ëŠ” `Ctrl+Shift+I`
- Console íƒ­ìœ¼ë¡œ ì´ë™

### 2. ë””ë²„ê¹… ë„êµ¬ í™•ì¸
ë¸Œë¼ìš°ì € ì½˜ì†”ì— ë‹¤ìŒê³¼ ê°™ì€ ë©”ì‹œì§€ê°€ í‘œì‹œë˜ì–´ì•¼ í•©ë‹ˆë‹¤:
```
ğŸ”§ Supabase ë””ë²„ê¹… ë„êµ¬ í™œì„±í™”ë¨
ğŸ”§ ì•± ë””ë²„ê¹… ë„êµ¬ í™œì„±í™”ë¨
```

## ğŸ¯ ì§„ë‹¨ ëª…ë ¹ì–´

### ì „ì²´ ì§„ë‹¨ ì‹¤í–‰ (ê¶Œì¥)
```javascript
// ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ í•œ ë²ˆì— ì‹¤í–‰
await supabaseDebug.runFullDiagnostics()
```

### ê°œë³„ í…ŒìŠ¤íŠ¸

#### 1. Supabase ì—°ê²° í™•ì¸
```javascript
// ê¸°ë³¸ ì—°ê²° ìƒíƒœ í™•ì¸
await supabaseDebug.checkConnection()
```

#### 2. ì¸ì¦ ìƒíƒœ í™•ì¸
```javascript
// í˜„ì¬ ë¡œê·¸ì¸ ìƒíƒœì™€ ì„¸ì…˜ í™•ì¸
await supabaseDebug.checkAuth()
```

#### 3. ì»¤í”Œ ì—°ê²° ìƒíƒœ í™•ì¸
```javascript
// ì»¤í”Œ ì •ë³´ì™€ íŒŒíŠ¸ë„ˆ ì •ë³´ í™•ì¸
const user = await supabaseDebug.checkAuth()
if (user) {
  await supabaseDebug.checkCouple(user.id)
}
```

#### 4. RLS ì •ì±… í…ŒìŠ¤íŠ¸
```javascript
// í…Œì´ë¸”ë³„ ì ‘ê·¼ ê¶Œí•œ í™•ì¸
await appDebug.testRLS()
```

#### 5. CRUD ì‘ì—… í…ŒìŠ¤íŠ¸
```javascript
// ìƒì„±/ìˆ˜ì •/ì‚­ì œ ê¶Œí•œ í…ŒìŠ¤íŠ¸
await appDebug.testCRUD()
```

#### 6. ì‹¤ì‹œê°„ êµ¬ë… í…ŒìŠ¤íŠ¸
```javascript
// íŠ¹ì • í…Œì´ë¸”ì˜ ì‹¤ì‹œê°„ êµ¬ë… í…ŒìŠ¤íŠ¸
supabaseDebug.testRealtime('rules')
supabaseDebug.testRealtime('violations')
supabaseDebug.testRealtime('rewards')
```

## ğŸ”¬ ì•± ìƒíƒœ í™•ì¸

### í˜„ì¬ ìƒíƒœ ë³´ê¸°
```javascript
// ì „ì²´ ì•± ìƒíƒœ
appDebug.getState()

// í˜„ì¬ ì‚¬ìš©ì ì •ë³´
appDebug.getUser()

// ì»¤í”Œ ID
appDebug.getCoupleId()
```

### ë°ì´í„° ë‹¤ì‹œ ë¡œë“œ
```javascript
// ì»¤í”Œ ë°ì´í„° ë‹¤ì‹œ ë¡œë“œ
await appDebug.loadData()

// ì „ì²´ ë°ì´í„° ìƒˆë¡œê³ ì¹¨
await appDebug.refreshData()
```

## ğŸ§ª ìˆ˜ë™ CRUD í…ŒìŠ¤íŠ¸

### ê·œì¹™ ìƒì„± í…ŒìŠ¤íŠ¸
```javascript
// ìƒˆ ê·œì¹™ ë§Œë“¤ê¸°
await appDebug.createRule('í…ŒìŠ¤íŠ¸ ê·œì¹™', 'ë””ë²„ê¹…ìš© í…ŒìŠ¤íŠ¸', 5000)
```

### ë²Œê¸ˆ ìƒì„± í…ŒìŠ¤íŠ¸
```javascript
// ë¨¼ì € ê·œì¹™ ID í™•ì¸
const state = appDebug.getState()
const ruleId = state.rules[0]?.id
const userId = state.user?.id

if (ruleId && userId) {
  // ë²Œê¸ˆ ì¶”ê°€
  await appDebug.createViolation(ruleId, userId, 5000, 'í…ŒìŠ¤íŠ¸ ë²Œê¸ˆ')
}
```

### ë³´ìƒ ìƒì„± í…ŒìŠ¤íŠ¸
```javascript
// ìƒˆ ë³´ìƒ ë§Œë“¤ê¸°
await appDebug.createReward('í…ŒìŠ¤íŠ¸ ë³´ìƒ', 'ë””ë²„ê¹…ìš© ë³´ìƒ', 50000)
```

## ğŸ“Š ë””ë²„ê·¸ ë¡œê·¸ í•´ì„

### ì„±ê³µ í‘œì‹œ
- âœ… ì´ˆë¡ìƒ‰ ë°°ê²½: ì‘ì—… ì„±ê³µ
- ğŸ“¨ ì´ë²¤íŠ¸ ìˆ˜ì‹ : ì‹¤ì‹œê°„ ë°ì´í„° ìˆ˜ì‹ ë¨

### ê²½ê³  í‘œì‹œ
- âš ï¸ ì£¼í™©ìƒ‰ ë°°ê²½: ê²½ê³  (ì£¼ì˜ í•„ìš”)
- ì„¸ì…˜ ì—†ìŒ, ì»¤í”Œ ì—°ê²° ì•ˆë¨ ë“±

### ì˜¤ë¥˜ í‘œì‹œ
- âŒ ë¹¨ê°„ìƒ‰ ë°°ê²½: ì‘ì—… ì‹¤íŒ¨
- ğŸ’¥ ì˜ˆì™¸ ë°œìƒ: ì‹¬ê°í•œ ì˜¤ë¥˜

## ğŸ” ë¬¸ì œ í•´ê²° ì ˆì°¨

### 1ë‹¨ê³„: ì „ì²´ ì§„ë‹¨ ì‹¤í–‰
```javascript
await supabaseDebug.runFullDiagnostics()
```

### 2ë‹¨ê³„: ì˜¤ë¥˜ ë©”ì‹œì§€ í™•ì¸
- RLS ì •ì±… ì˜¤ë¥˜ê°€ ìˆë‹¤ë©´ â†’ Supabase ëŒ€ì‹œë³´ë“œì—ì„œ RLS ì •ì±… í™•ì¸
- ì¸ì¦ ì˜¤ë¥˜ê°€ ìˆë‹¤ë©´ â†’ ë‹¤ì‹œ ë¡œê·¸ì¸ ì‹œë„
- ì—°ê²° ì˜¤ë¥˜ê°€ ìˆë‹¤ë©´ â†’ í™˜ê²½ë³€ìˆ˜ ë° ë„¤íŠ¸ì›Œí¬ í™•ì¸

### 3ë‹¨ê³„: ì‹¤ì‹œê°„ êµ¬ë… í…ŒìŠ¤íŠ¸
ë‘ ê°œì˜ ë¸Œë¼ìš°ì € íƒ­ì„ ì—´ê³ :

**íƒ­ 1ì—ì„œ:**
```javascript
// ì‹¤ì‹œê°„ êµ¬ë… ì‹œì‘
supabaseDebug.testRealtime('rules')
```

**íƒ­ 2ì—ì„œ:**
```javascript
// ê·œì¹™ ìƒì„±
await appDebug.createRule('ì‹¤ì‹œê°„ í…ŒìŠ¤íŠ¸', 'ë™ê¸°í™” í™•ì¸', 1000)
```

íƒ­ 1ì˜ ì½˜ì†”ì—ì„œ "ğŸ“¨ ì´ë²¤íŠ¸ ìˆ˜ì‹ " ë©”ì‹œì§€ê°€ ë‚˜íƒ€ë‚˜ì•¼ í•©ë‹ˆë‹¤.

### 4ë‹¨ê³„: ê²°ê³¼ ìº¡ì²˜
1. ì½˜ì†” ë¡œê·¸ ì „ì²´ë¥¼ ë³µì‚¬ (Ctrl+A, Ctrl+C)
2. ì˜¤ë¥˜ ë©”ì‹œì§€ ìŠ¤í¬ë¦°ìƒ· ì´¬ì˜
3. ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ ì‹¤íŒ¨í•œ ìš”ì²­ í™•ì¸

## ğŸ’¡ ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ

### 1. "JWT expired" ì˜¤ë¥˜
```javascript
// í•´ê²°: ë‹¤ì‹œ ë¡œê·¸ì¸
location.href = '/login'
```

### 2. RLS ì •ì±… ì˜¤ë¥˜
```javascript
// í˜„ì¬ ì •ì±… í™•ì¸
await appDebug.testRLS()
// "SELECT" ê¶Œí•œì´ ì—†ë‹¤ë©´ Supabase ëŒ€ì‹œë³´ë“œì—ì„œ ì •ì±… ìˆ˜ì • í•„ìš”
```

### 3. ì‹¤ì‹œê°„ êµ¬ë… ì•ˆë¨
```javascript
// WebSocket ì—°ê²° ìƒíƒœ í™•ì¸
const channels = appDebug.supabase.getChannels()
console.log('Active channels:', channels)
```

## ğŸ“ ë””ë²„ê·¸ ê²°ê³¼ ë³´ê³ 

ë¬¸ì œë¥¼ ë°œê²¬í•˜ë©´ ë‹¤ìŒ ì •ë³´ë¥¼ ìˆ˜ì§‘í•´ì£¼ì„¸ìš”:

1. **ì „ì²´ ì§„ë‹¨ ê²°ê³¼**: `supabaseDebug.runFullDiagnostics()` ì‹¤í–‰ ê²°ê³¼
2. **ì•± ìƒíƒœ**: `appDebug.getState()` ê²°ê³¼
3. **ì˜¤ë¥˜ ë©”ì‹œì§€**: ì½˜ì†”ì— í‘œì‹œëœ ë¹¨ê°„ìƒ‰ ì˜¤ë¥˜
4. **ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜**: Network íƒ­ì˜ ì‹¤íŒ¨í•œ ìš”ì²­

## ğŸš€ ì‹¤í–‰ ì˜ˆì‹œ

```javascript
// 1. ì „ì²´ ì§„ë‹¨
await supabaseDebug.runFullDiagnostics()

// 2. ë¬¸ì œê°€ ìˆë‹¤ë©´ ê°œë³„ í…ŒìŠ¤íŠ¸
await appDebug.testRLS()
await appDebug.testCRUD()

// 3. ì‹¤ì‹œê°„ í…ŒìŠ¤íŠ¸
supabaseDebug.testRealtime('rules')

// 4. ìˆ˜ë™ìœ¼ë¡œ ë°ì´í„° ìƒì„± í…ŒìŠ¤íŠ¸
await appDebug.createRule('ë””ë²„ê·¸ í…ŒìŠ¤íŠ¸', 'ë¬¸ì œ í™•ì¸ìš©', 1000)
```

---

ğŸ’¡ **Tip**: ëª¨ë“  ëª…ë ¹ì–´ëŠ” ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ì˜ Console íƒ­ì—ì„œ ì‹¤í–‰í•˜ì„¸ìš”!